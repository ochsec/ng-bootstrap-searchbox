!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("rxjs/Observable"),require("rxjs/Subject"),require("rxjs/BehaviorSubject"),require("rxjs/add/operator/map"),require("rxjs/add/operator/switchMap"),require("rxjs/add/operator/debounceTime"),require("rxjs/add/operator/distinctUntilChanged"),require("rxjs/add/operator/takeUntil")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms","rxjs/Observable","rxjs/Subject","rxjs/BehaviorSubject","rxjs/add/operator/map","rxjs/add/operator/switchMap","rxjs/add/operator/debounceTime","rxjs/add/operator/distinctUntilChanged","rxjs/add/operator/takeUntil"],r):r((e.ng=e.ng||{},e.ng["ng-bootstrap-searchbox"]=e.ng["ng-bootstrap-searchbox"]||{}),e.ng.core,e.ng.common,e.ng.forms,e.Rx,e.Rx,e.rxjs_BehaviorSubject)}(this,function(e,r,t,o,n,i,s){"use strict";var a=function(){function e(e){this._fb=e,this._records=new s.BehaviorSubject([]),this.update=new r.EventEmitter,this.ngUnsubscribe=new i.Subject,this.visible=!1}return Object.defineProperty(e.prototype,"records",{get:function(){return this._records.getValue()},set:function(e){this._records.next(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.form=this._fb.group({SearchBox:[""]}),this.searchControl=this.form.controls.SearchBox,this.searchControl.valueChanges.distinctUntilChanged().debounceTime(500).map(function(e){return null!=e?e.toString().trim():null}).switchMap(function(r){return e.searchEntities(r)}).takeUntil(this.ngUnsubscribe).subscribe(function(r){e.update.emit(r),console.log(r)})},e.prototype.searchEntities=function(e){var r=this,t=null===e?"":e.trim().toLowerCase(),o=new Array;return this.entities||(this.entities=this.records),new n.Observable(function(e){if(""===t)e.next(r.entities);else{var n=Object.keys(r.entities[0]);r.entities.forEach(function(e){for(var r=!1,i=0,s=n;i<s.length;i++){var a=s[i];e[a]&&e[a].toString().toLowerCase().indexOf(t)>-1&&(r=!0)}r&&o.push(e)}),e.next(o)}})},e.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},e.decorators=[{type:r.Component,args:[{selector:"searchbox",templateUrl:"./searchbox.component.html"}]}],e.ctorParameters=function(){return[{type:o.FormBuilder}]},e.propDecorators={records:[{type:r.Input,args:["records"]}],update:[{type:r.Output}]},e}(),u=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{declarations:[a],imports:[t.CommonModule,o.FormsModule,o.ReactiveFormsModule],exports:[a]}]}],e.ctorParameters=function(){return[]},e}();e.SearchboxModule=u,e.SearchboxComponent=a,Object.defineProperty(e,"__esModule",{value:!0})});